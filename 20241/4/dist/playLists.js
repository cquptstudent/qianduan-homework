(()=>{let t={code:null,account:{id:null,userName:null},profile:{userId:null,nickname:null,avatarImgId:null,avatarUrl:null}},e=!1;const l=document.getElementById("head_4"),n=document.getElementById("username_4");let o={code:null};fetch(`http://localhost:3000/login/refresh?timestamp=${(new Date).getTime()}&noCookie=true`).then((t=>t.json())).then((t=>o=t)).then((()=>{301===o.code?console.log("not login"):200===o.code?console.log("Logged in"):console.log(o.code)})).then((()=>{fetch(`http://localhost:3000/user/account?timestamp=${(new Date).getTime()}`).then((t=>t.json())).then((e=>t=e)).then((()=>{e=null!=t.account&&null!=t.account.id,e&&(null===t.profile?(l.setAttribute("src","../img/default_head.png"),n.innerText=t.account.userName):(l.setAttribute("src",t.profile.avatarUrl),n.innerText=t.profile.nickname.toString())),null!==t.account.id&&fetch(`http://localhost:3000/user/playlist?uid=${t.account.id}`).then((t=>t.json)).then((t=>geDanListByUser=t))}))}))})(),(()=>{page=4,document.getElementById("head_4"),document.getElementById("username_4");const t=document.getElementsByClassName("categories_5"),e=document.getElementsByClassName("picture_8"),l=document.getElementsByClassName("number_9"),n=document.getElementsByClassName("description_8"),o=document.getElementsByClassName("every_item_6");let a={tags:[{playlistTag:{id:null,name:null},name:null,id:null}],code:null},s={playlists:[{name:null,playCount:null,coverImgUrl:null}],total:null,code:null,more:null,cat:null};function c(t=0){if(0!==t)for(let e=0;e<a.tags.length;e++)t===a.tags[e].playlistTag.id&&fetch(`http://localhost:3000/top/playlist?cat=${a.tags[e].name}&t=${(new Date).getTime()}`).then((t=>{t.json().then((t=>s=t)),console.log(t.status)}));setTimeout((()=>{for(let t=0;t<o.length;t++)e[t].style.cssText+=`background: url(${u(s.playlists[t].coverImgUrl)})`,l[t].innerHTML=s.playlists[t].playCount,n[t].innerHTML=s.playlists[t].name}),300)}function u(t){let e="";for(let l of t){if("?"===l)break;e+=l}return e+"?param=215y215"}fetch(`http://localhost:3000/playlist/hot?t=${(new Date).getTime()}`).then((t=>{t.json().then((t=>a=t)),console.log(t.status)})),fetch(`http://localhost:3000/top/playlist?t=${(new Date).getTime()}`).then((t=>{t.json().then((t=>s=t)),console.log(t.status)})),setTimeout((()=>{!function(){for(let e=0;e<a.tags.length;e++)t[a.tags.length-e-1].textContent=a.tags[e].name}(),c(0),function(){for(let e=0;e<t.length;e++)t[e].addEventListener("click",(function(){c(a.tags[t.length-e-1].playlistTag.id)}))}()}),500)})();
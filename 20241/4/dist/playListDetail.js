(()=>{let e={code:null,account:{id:null,userName:null},profile:{userId:null,nickname:null,avatarImgId:null,avatarUrl:null}},t=!1;const n=document.getElementById("head_4"),l=document.getElementById("username_4");let o={code:null};fetch(`http://localhost:3000/login/refresh?timestamp=${(new Date).getTime()}&noCookie=true`).then((e=>e.json())).then((e=>o=e)).then((()=>{301===o.code?console.log("not login"):200===o.code?console.log("Logged in"):console.log(o.code)})).then((()=>{fetch(`http://localhost:3000/user/account?timestamp=${(new Date).getTime()}`).then((e=>e.json())).then((t=>e=t)).then((()=>{t=null!=e.account&&null!=e.account.id,t&&(null===e.profile?(n.setAttribute("src","../img/default_head.png"),l.innerText=e.account.userName):(n.setAttribute("src",e.profile.avatarUrl),l.innerText=e.profile.nickname.toString())),null!==e.account.id&&fetch(`http://localhost:3000/user/playlist?uid=${e.account.id}`).then((e=>e.json)).then((e=>geDanListByUser=e))}))}))})(),(()=>{let e,t={code:null,data:[{searchWord:null,score:null,content:null,source:null,iconType:null,iconUrl:null,url:null,alg:null}],message:null},n=null,l=document.getElementById("under_0"),o=document.getElementById("under_1");const s=document.getElementById("search_box_2"),i=document.getElementById("right_side_1"),a=document.getElementById("right_side_2"),u=document.getElementById("login_window_2"),c=document.getElementById("button_3"),d=document.getElementById("input_3");let m=document.getElementsByClassName("hot_4"),r=document.getElementsByClassName("number_in_hot_5"),g=document.getElementsByClassName("name_5");function _(e){return(e+1).toString()}function h(){n=t;let e=document.getElementsByClassName("number_in_hot_5"),l=document.getElementsByClassName("name_5"),o=document.getElementsByClassName("hot_4"),s=document.getElementById("new_item_2");if(null!=s){for(const e of o)e.remove();for(const t of e)t.remove();for(const e of l)e.remove();s.remove()}}fetch("http://localhost:3000/search/hot/detail").then((e=>{e.json().then((e=>t=e)),console.log(`hot status: ${e.status}`)})),setTimeout((()=>{s.addEventListener("click",(function(){!function(){let e=document.createElement("div");e.innerHTML='<div id="show_3">\n<div class="top_place_4">\n热搜榜\n</div>\n</div>',e.setAttribute("id","new_item_2"),console.log(window.page),1===window.page?i.appendChild(e):2===window.page||3===window.page?u.appendChild(e):a.appendChild(e)}(),e=document.getElementById("show_3"),function(){for(let n=0;n<t.data.length;n++){let t='<div class="number_in_hot_5"></div>\n<div class="name_5"></div>',n=document.createElement("div");n.innerHTML=t,n.setAttribute("class","hot_4"),e.appendChild(n)}}(),function(){for(let e=0;e<3;e++)r[e].setAttribute("class","number_in_hot_5 very_hot_5")}(),function(){for(let e=0;e<20;e++)r[e].innerHTML=_(e),g[e].innerHTML=t.data[e].searchWord}(),function(){m=document.getElementsByClassName("hot_4");for(let e=0;e<m.length;e++)m[e].addEventListener("click",(()=>{window.open(encodeURI("./search.html?keyWord="+g[e].textContent))}))}()})),null!==l?l.addEventListener("click",(function(){h()})):o.addEventListener("click",h),setTimeout((()=>{d.addEventListener("keyup",(function(e){"enter"===e.key&&window.open(encodeURI("./search.html?keyWord="+d.value))})),c.onclick=function(){window.open(encodeURI("./search.html?keyWord="+d.value))}}),200)}),100)})(),document.getElementById("album_picture_4"),document.getElementById("title_6"),document.getElementById("singer_6"),document.getElementById("now_time_6"),document.getElementById("total_time_6"),document.getElementById("left_place_7"),document.getElementById("right_place_7"),document.getElementById("progress_bar_6"),document.getElementById("now_7"),document.getElementById("stop_continue_button_6"),document.getElementById("continue_or_stop_7"),window.playSongsObject=[],function(){let e=decodeURI(document.URL);e=e.slice(e.indexOf("=")+1),Number(e)}(),(()=>{page=5;let e,t={code:null,relatedVideos:null,playlist:{id:null,name:null,coverImgId:null,coverImgUrl:null,userId:null,createTime:null,trackCount:null,playCount:null,description:null,creator:{avatarUrl:null,nickname:null},trackIds:[{id:null,v:null,t:null,at:null,uid:null}],score:null,algTags:null,trialMode:null},urls:null},n={songs:[{name:null,id:null,t:null,ar:[{id:null,name:null,tns:null,alias:[]}],alia:null,al:{id:null,name:null,picUrl:null,tns:null,pic_str:null,pic:null},dt:null}],privileges:null,code:null};const l=document.getElementById("pictures_5"),o=document.getElementById("list_name_6"),s=document.getElementById("description_6"),i=document.getElementById("head_7"),a=document.getElementById("creator_name_7"),u=document.getElementById("create_time_7"),c=document.getElementById("song_list_4"),d=document.getElementById("song_number_7"),m=document.getElementById("comment_number_7");let r=document.getElementsByClassName("songs_in_play_list_5"),g=document.getElementsByClassName("number_in_list_6"),_=document.getElementsByClassName("album_picture_6"),h=document.getElementsByClassName("album_name_6"),y=document.getElementsByClassName("time_6"),p=document.getElementsByClassName("title_7"),f=document.getElementsByClassName("singer_7");function E(e){let t=e/1e3,n=Math.floor(t/60);return t%=60,t=Math.round(t),t=t<10?`0${t}`:t.toString(),`${n}:${t}`}function I(e){let t="";if(t+=n.songs[e].ar[0].name,n.songs[e].ar.length>1)for(let l=1;l<n.songs[e].ar.length;l++)t+=`/${n.songs[e].ar[l].name}`;return t}function v(e){let t="";if(t+=n.songs[e].name,0!==n.songs[e].alia.length)for(let l=0;l<n.songs[e].alia.length;l++)t+=` (${n.songs[e].alia[l]})`;return t}refreshStatus(),e=function(){let e=decodeURI(document.URL);return e=e.slice(e.indexOf("=")+1),console.log(`playlist: ${e}`),Number(e)}(),setTimeout((()=>{fetch(`http://localhost:3000/playlist/detail?id=${e}&t=${(new Date).getTime()}`).then((e=>e.json())).then((e=>t=e)),fetch(`http://localhost:3000/playlist/track/all?id=${e}&t=${(new Date).getTime()}`).then((e=>e.json())).then((e=>n=e)).then((()=>function(){if(r.length<n.songs.length)for(let e=1;e<=n.songs.length;e++){let e='<div class="number_in_list_6">01</div>\n<div class="album_picture_6"></div>\n<div class="singer_title_6">\n<div class="title_7">title</div>\n<div class="singer_7">singer</div>\n</div>\n<div class="album_name_6">album</div>\n<div class="time_6">00:00</div>\n',t=document.createElement("div");t.innerHTML=e,t.setAttribute("class","songs_in_play_list_5"),c.appendChild(t)}}())).then((()=>{!function(){for(let e=0;e<r.length;e++)r[e].onclick=function(){songId=n.songs[e].id,playAll(songId)}}(),l.style.cssText+=`background: url("${t.playlist.coverImgUrl+"?param=203y203"}")`,o.innerText=t.playlist.name,s.innerText=t.playlist.description,i.setAttribute("src",t.playlist.creator.avatarUrl),a.innerText=t.playlist.creator.nickname,u.innerText=function(e){let t="",n=new Date(e);return t+=`${n.getFullYear()}-${n.getMonth()+1}-${n.getDate()} ${n.getHours()}:${n.getMinutes()} 创建`,t}(t.playlist.createTime),d.innerText=t.playlist.trackCount,m.innerText=t.playlist.commentCount,function(){for(let e=0;e<n.songs.length;e++)g[e].innerHTML=(e+1).toString(),_[e].style.cssText+=`background: url(${n.songs[e].al.picUrl+"?param=51y51"})`,h[e].innerHTML=n.songs[e].al.name,y[e].innerHTML=E(n.songs[e].dt),p[e].innerHTML=v(e),f[e].innerHTML=I(e)}()}))}),50)})();